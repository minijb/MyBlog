## 1. 重建索引

`reindex`是pandas重要的方法，该方法用于创建一个符合新索引的**新对象**

```python
obj = pd.Series([4.5,7.2,-5.3,3.6],index = ['d','b','a','c'])
obj
Out[6]: 
d    4.5
b    7.2
a   -5.3
c    3.6
dtype: float64


#此时使用reindex的时候会根据新的索引进行排列，如果某个索引之前不存在，则为NaN
obj2 = obj.reindex(['a','b','c','d','e'])
obj2
Out[8]: 
a   -5.3
b    7.2
c    3.6
d    4.5
e    NaN
dtype: float64
```

需要注意的是，这不是仅仅修改原索引，values也会跟随着索引进行移动！！！

对于顺序数据，在重建索引的时候可以会需要进行插值或填值。method可选参数允许我们使用诸如ffill当方法在重建索引的时候插值，ffill方法会将值向前填充

```python
obj3 = pd.Series(['blue','purple','yellow'],index=[0,2,4])
obj3.reindex(range(6),method='ffill')
Out[10]: 
0      blue
1      blue
2    purple
3    purple
4    yellow
5    yellow
dtype: object
```

******

在dataframe中，reindex可以改变行列索引也可以同时改变两者。当且仅当传入一个序列的时候行会重建索引

```python
frame = pd.DataFrame(np.arange(9).reshape((3,3)),index=['a','c','d'],columns=['Ohio','Texax','California'])
frame
Out[13]: 
   Ohio  Texax  California
a     0      1           2
c     3      4           5
d     6      7           8
frame2 = frame.reindex(['a','b','c','d'])
frame2
Out[15]: 
   Ohio  Texax  California
a   0.0    1.0         2.0
b   NaN    NaN         NaN
c   3.0    4.0         5.0
d   6.0    7.0         8.0
```

想要改变列可以使用columns可选参数
```python
states = ['Texax','Ohio','California']
frame.reindex(columns=states)
Out[17]: 
   Texax  Ohio  California
a      1     0           2
c      4     3           5
d      7     6           8
```

当然我们也可以使用loc进行更高级的标签索引

**reindex参数**

```python
index	#新建列的索引
method	#插值方法
fill_value	#通过重新索引引入确实数据时使用的替代之
limit	#当前向或后向填充时，所需填充的最大尺寸间隙
tolerance	#当前向或后向填充时，所需填充的不精准匹配下的最大尺寸间隙
level	#匹配MultiIndex级别的简单索引，否则使用子集
copy 	#如果为True即使新索引等于旧索引，也总是赋值底层数据。如果为False，则索引相同时不复制
```

> ```python
> Or we can use "axis-style" keyword arguments
> >>> df.reindex(['http_status', 'user_agent'], axis="columns")
>            http_status  user_agent
> Firefox            200         NaN
> Chrome             200         NaN
> Safari             404         NaN
> IE10               404         NaN
> Konqueror          301         Na
> ```

## 2. 轴上删除条目

drop方法会返回一个含有指示值或轴向上删除值的**新对象**

```python
obj = pd.Series(np.arange(5.),index = ['a','b','c','d','e'])
obj
Out[19]: 
a    0.0
b    1.0
c    2.0
d    3.0
e    4.0
dtype: float64
new_obj = obj.drop('c')
new_obj
Out[21]: 
a    0.0
b    1.0
d    3.0
e    4.0
dtype: float64

obj.drop(['b','c'])
Out[22]: 
a    0.0
d    3.0
e    4.0
dtype: float64
```

在DataFrame中，索引值可以从轴向上删除

```python
data = pd.DataFrame(np.arange(16).reshape((4,4)),index=['Ohio','Colorado','Utah','New York'],columns=['one','two','three','four'])
data
Out[24]: 
          one  two  three  four
Ohio        0    1      2     3
Colorado    4    5      6     7
Utah        8    9     10    11
New York   12   13     14    15
```

如果没有选择参数则默认从0轴上删除

```python
data.drop(['Ohio','Utah'])
Out[25]: 
          one  two  three  four
Colorado    4    5      6     7
New York   12   13     14    15
```

我们可以指定axis来删除列中的值，如`axis=1,axis='columns'`

```python
data.drop(['one','two'],axis=1)
Out[26]: 
          three  four
Ohio          2     3
Colorado      6     7
Utah         10    11
New York     14    15
data.drop(['one','two'],axis='columns')
Out[27]: 
          three  four
Ohio          2     3
Colorado      6     7
Utah         10    11
New York     14    15

```

在很多函数例如drop这种会修改Series或DataFrame的尺寸或形状，这些方法操作原对象而不返回新对象，这就需要使用可选参数`inplace`

```python
data.drop('Ohio',inplace=True)
data
Out[32]: 
          one  two  three  four
Colorado    4    5      6     7
Utah        8    9     10    11
New York   12   13     14    15
```

## 3. 索引，选择和过滤

Series索引和Numpy数组的索引类似，只不过Series的索引可以不仅仅时整数

```python
obj
Out[33]: 
a    0.0
b    1.0
c    2.0
d    3.0
e    4.0
dtype: float64

obj['b']
Out[34]: 1.0
obj[2:4]
Out[35]: 
c    2.0
d    3.0
dtype: float64

obj[['b','d','a']]
Out[36]: 
b    1.0
d    3.0
a    0.0
dtype: float64

obj[[1,3]]
Out[37]: 
b    1.0
d    3.0
dtype: float64

obj[obj<2]
Out[38]: 
a    0.0
b    1.0
dtype: float64
```

普通python切片是不包含尾部的，但是Series包含

```python
obj['b':'c']
Out[39]: 
b    1.0
c    2.0
dtype: float64
```

这种方法修改值的时候会修改Series对应部分

```python
obj['b':'c']=5
obj
Out[41]: 
a    0.0
b    5.0
c    5.0
d    3.0
e    4.0
dtype: float64

```

