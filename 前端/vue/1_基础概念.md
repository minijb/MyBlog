## 1. 目录结构

- public ： 静态资源---不会被编译的
- src
  - assets：静态资源
  - components：存放组件
- app.vue: 全局的入口文件
- main.ts: 全局的ts文件

- index.html 入口网页
- package.json ：命令

https://xiaoman.blog.csdn.net/?type=blog

## 2. ref全家桶

**使用ref来绑定属性**

```vue
<template>
  <div>
    {{ Man }}
    <button @click="change">修改</button>
  </div>
</template>

<script setup lang="ts">
import { ref } from "vue";
import type { Ref } from "vue";
type M = {
  name: string;
};

const Man: Ref<M> = ref({ name: "zhouhao" });
const change = () => {
  Man.value.name = "big";
  console.log(Man);
};
</script>
```

注：ref返回的类型是ref类型，如果我们需要修改值则需要调用ref的value属性来获得原本对象的属性，在typescript中可以使用泛型来进行标记

**isref判断ref对象**

```typescript
const Man: Ref<M> = ref({ name: "zhouhao" });
const change = () => {
  Man.value.name = "big";
  console.log(Man);
};
console.log(isRef(Man));
```

**shallowRef**

和ref的区别：只有在直接修改value值的时候才会响应（ref可以在修改value属性就会响应）

但是同时，ref和shallowref在一个代码块中不能同时存在，否则shallowref会受到影响

```typescript
const Man = shallowRef({ name: "zhouhao" });
const change = () => {
  Man.value = { name: "xxxx" };
  console.log(Man);
};
console.log(isRef(Man));
```

**triggerRef**

方法，可以强制让xxxref响应并修改

**customRef**

```typescript
<template>
  <div>
    {{ Man }}
    <button @click="change">修改</button>
  </div>
  <div>customRef{{ obj }}</div>
</template>

<script setup lang="ts">
import { ref, isRef, shallowRef, customRef } from "vue";
import type { Ref } from "vue";
type M = {
  name: string;
};

const Man = shallowRef({ name: "zhouhao" });
const change = () => {
  obj.value = "xxxxx";
  console.log(obj);
};
console.log(isRef(Man));

function MyRef<T>(value: T) {
  return customRef((track, trigger) => {
    return {
      get() {
        track();
        return value;
      },
      set(newValue) {
        value = newValue;
        trigger();
      },
    };
  });
}

const obj = MyRef<string>("MyRef");
</script>
```

**获得组件组件中的值**

同时因为是双向绑定所以可以获取组件中的值

我们可以在组件上的使用`ref`来获得绑定的值

```vue
<script setup>
import { ref, onMounted } from 'vue'
import Child from './Child.vue'

const child = ref(null)

onMounted(() => {
  // child.value 是 <Child /> 组件的实例
})
</script>

<template>
  <Child ref="child" />
</template>

```

![image.png](https://s2.loli.net/2022/10/08/EduQxr9mWMC8gfJ.png)

但是要注意生命周期，如果没有渲染出则无法获取属性

